<!--
SPDX-FileCopyrightText: GTK Development Team

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gtk &ndash; 3.0: Compiling the GTK libraries</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="gtk-logo.svg"/>
  <meta property="og:image:alt" content="Gtk-3.0"/>
  

  
  <meta property="og:title" content="Gtk: Compiling the GTK libraries"/>
  <meta property="og:description" content="Reference for Gtk-3.0: Compiling the GTK libraries"/>
  <meta name="twitter:title" content="Gtk: Compiling the GTK libraries"/>
  <meta name="twitter:description" content="Reference for Gtk-3.0: Compiling the GTK libraries"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="Gtk" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <a href="index.html"><img src="gtk-logo.svg" class="logo"/></a>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Gtk</a></h3>
        <p>API Version: 3.0</p>
        
        <p>Library Version: 3.24</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2024.2</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Compiling the GTK libraries
    <a href="building.html#title" class="anchor"></a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <h2 id="building-gtk-on-unix-like-systems">Building GTK on UNIX-like systems<a class="md-anchor" href="building.html#building-gtk-on-unix-like-systems" title="Permanent link"></a></h2>
<p>This chapter covers building and installing <span class="caps">GTK</span> on <span class="caps">UNIX</span> and <span class="caps">UNIX</span>-like
systems such as Linux. Compiling <span class="caps">GTK</span> on Microsoft Windows is different in
detail and somewhat more difficult to get going since the necessary tools
aren&#8217;t included with the operating&nbsp;system.</p>
<p>Before we get into the details of how to compile <span class="caps">GTK</span>, we should mention that
in many cases, binary packages of <span class="caps">GTK</span> prebuilt for your operating system
will be available, either from your operating system vendor or from
independent sources. If such a set of packages is available, installing it
will get you programming with <span class="caps">GTK</span> much faster than building it yourself. In
fact, you may well already have <span class="caps">GTK</span> installed on your system&nbsp;already.</p>
<p>On <span class="caps">UNIX</span>-like systems <span class="caps">GTK</span> uses the standard <span class="caps">GNU</span> build system, using autoconf
for package configuration and resolving portability issues, automake for
building makefiles that comply with the <span class="caps">GNU</span> Coding Standards, and libtool
for building shared libraries on multiple&nbsp;platforms.</p>
<p>If you are building <span class="caps">GTK</span> from the distributed source packages, then you won&#8217;t
need these tools installed; the necessary pieces of the tools are already
included in the source packages. But it&#8217;s useful to know a bit about how
packages that use these tools work. A source package is distributed as a
tar.bz2 or tar.xz file which you unpack into a directory full of the source
files as&nbsp;follows:</p>
<div class="codehilite"><pre><span></span><code>tar xvfj gtk+-3.24.0.tar.bz2
tar xvfJ gtk+-3.24.0.tar.xz
</code></pre></div>

<p>In the toplevel directory that is created, there will be a shell script
called <code>configure</code> which you then run to take the template makefiles called
<code>Makefile.in</code> in the package and create makefiles customized for your
operating system. The configure script can be passed various command line
arguments to determine how the package is built and installed. The most
commonly useful argument is the <code>--prefix</code> argument which determines where the
package is installed. To install a package in <code>/opt/gtk</code> you would run
configure&nbsp;as:</p>
<div class="codehilite"><pre><span></span><code>./configure --prefix=/opt/gtk
</code></pre></div>

<p>A full list of options can be found by running configure with the <code>--help</code>
argument. In general, the defaults are right and should be trusted. After
you&#8217;ve run configure, you then run the make command to build the package and
install&nbsp;it:</p>
<div class="codehilite"><pre><span></span><code>make
make install
</code></pre></div>

<p>If you don&#8217;t have permission to write to the directory you are installing
in, you may have to change to root temporarily before running make install.
Also, if you are installing in a system directory, on some systems (such as
Linux), you will need to run <code>ldconfig</code> after <code>make install</code> so that the
newly installed libraries will be&nbsp;found.</p>
<p>Several environment variables are useful to pass to set before running
configure. <code>CPPFLAGS</code> contains options to pass to the C preprocessor, and is
used to tell the compiler where to look for include files. <code>CFLAGS</code> contains
options to pass to the C ompiler. The <code>LDFLAGS</code> variable is used in a
similar fashion for the linker. Finally the <code>PKG_CONFIG_PATH</code> environment
variable contains a search path that pkg-config (see below) uses when
looking for files describing how to compile programs using different
libraries. If you were installing <span class="caps">GTK</span> and it&#8217;s dependencies into <code>/opt/gtk</code>,
you might want to set these variables&nbsp;as:</p>
<div class="codehilite"><pre><span></span><code>CPPFLAGS=&quot;-I/opt/gtk/include&quot;
LDFLAGS=&quot;-L/opt/gtk/lib&quot;
PKG_CONFIG_PATH=&quot;/opt/gtk/lib/pkgconfig&quot;
export CPPFLAGS LDFLAGS PKG_CONFIG_PATH
</code></pre></div>

<p>You may also need to set the <code>LD_LIBRARY_PATH</code> environment variable so the
systems dynamic linker can find the newly installed libraries, and the
<code>PATH</code> environment program so that utility binaries installed by the various
libraries will be&nbsp;found.</p>
<div class="codehilite"><pre><span></span><code>export LD_LIBRARY_PATH=&quot;/opt/gtk/lib&quot;
export PATH=&quot;/opt/gtk/bin:$PATH&quot;
</code></pre></div>

<h3 id="dependencies">Dependencies<a class="md-anchor" href="building.html#dependencies" title="Permanent link"></a></h3>
<p>Before you can compile the <span class="caps">GTK</span> widget toolkit, you need to have various
other tools and libraries installed on your system. The two tools needed
during the build process (as differentiated from the tools used in when
creating <span class="caps">GTK</span> mentioned above such as autoconf) are <code>pkg-config</code> and <code>GNU make</code>.</p>
<ul>
<li>
<p><a href="https://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a> is a
  tool for tracking the compilation flags needed for libraries that are used
  by the <span class="caps">GTK</span> libraries. (For each library, a small .pc text file is
  installed in a standard location that contains the compilation flags
  needed for that library along with version number&nbsp;information.)</p>
</li>
<li>
<p>The <span class="caps">GTK</span> makefiles will mostly work with different versions of make,
  however, there tends to be a few incompatibilities, so the <span class="caps">GTK</span> team
  recommends installing <a href="https://www.gnu.org/software/make"><span class="caps">GNU</span> make</a> if you
  don&#8217;t already have it on your system and using it. (It may be called gmake
  rather than&nbsp;make.)</p>
</li>
</ul>
<p>Some of the libraries that <span class="caps">GTK</span> depends on are maintained by by the <span class="caps">GTK</span> team:
GLib, GdkPixbuf, Pango, <span class="caps">ATK</span> and GObject Introspection. Other libraries are
maintained&nbsp;separately.</p>
<ul>
<li>The GLib library provides core non-graphical functionality such as high
  level data types, Unicode manipulation, and an object and type system to C
  programs. It is available from the <a href="https://download.gnome.org/sources/glib/"><span class="caps">GNOME</span> file
  server</a>.</li>
<li>The GdkPixbuf library provides facilities for loading images in a variety
  of file formats. It is available from the <a href="https://download.gnome.org/sources/gdk-pixbuf/"><span class="caps">GNOME</span> file
  server</a>.</li>
<li>Pango is a library for internationalized text handling. It is available
  from the <a href="https://download.gnome.org/sources/pango/"><span class="caps">GNOME</span> file server</a>.</li>
<li><span class="caps">ATK</span> is the Accessibility Toolkit. It provides a set of generic interfaces
  allowing accessibility technologies such as screen readers to interact
  with a graphical user interface. It is available from the <a href="https://download.gnome.org/sources/atk/"><span class="caps">GNOME</span> file
  server</a>.</li>
<li>Gobject Introspection is a framework for making introspection data
  available to language bindings. It is available from the <a href="https://download.gnome.org/sources/gobject-introspection/"><span class="caps">GNOME</span> file
  server</a>.</li>
</ul>
<h3 id="external-dependencies">External dependencies<a class="md-anchor" href="building.html#external-dependencies" title="Permanent link"></a></h3>
<ul>
<li>The <span class="caps">GNU</span> libiconv library is needed to build GLib if your system doesn&#8217;t
  have the <code>iconv()</code> function for doing conversion between character
  encodings. Most modern systems should have <code>iconv()</code>.</li>
<li>The libintl library from the <span class="caps">GNU</span> gettext package is needed if your system
  doesn&#8217;t have the <code>gettext()</code> functionality for handling message
  translation&nbsp;databases.</li>
<li>The libraries from the X window system are needed to build Pango and <span class="caps">GTK</span>.
  You should already have these installed on your system, but it&#8217;s possible
  that you&#8217;ll need to install the development environment for these
  libraries that your operating system vendor&nbsp;provides.</li>
<li>The fontconfig library provides Pango with a standard way of locating
  fonts and matching them against font&nbsp;names.</li>
<li>Cairo is a graphics library that supports vector graphics and image
  compositing. Both Pango and <span class="caps">GTK</span> use cairo for all of their&nbsp;drawing.</li>
<li>libepoxy is a library that abstracts the differences between different
  OpenGL libraries. <span class="caps">GTK</span> uses it for cross-platform <span class="caps">GL</span>&nbsp;support.</li>
<li>The Wayland libraries are needed to build <span class="caps">GTK</span> with the Wayland&nbsp;backend.</li>
<li>The shared-mime-info package is not a hard dependency of <span class="caps">GTK</span>, but it
  contains definitions for mime types that are used by <span class="caps">GIO</span> and, indirectly,
  by <span class="caps">GTK</span>. gdk-pixbuf will use <span class="caps">GIO</span> for mime type detection if possible. For
  this to work, shared-mime-info needs to be installed and <code>XDG_DATA_DIRS</code>
  set accordingly at configure time. Otherwise, gdk-pixbuf falls back to its
  built-in mime type&nbsp;detection.</li>
</ul>
<h3 id="building-and-testing-gtk">Building and testing GTK<a class="md-anchor" href="building.html#building-and-testing-gtk" title="Permanent link"></a></h3>
<p>First make sure that you have the necessary external dependencies installed:
pkg-config, <span class="caps">GNU</span> make, the <span class="caps">JPEG</span>, <span class="caps">PNG</span>, and <span class="caps">TIFF</span> libraries, FreeType, and, if
necessary, libiconv and libintl. To get detailed information about building
these packages, see the documentation provided with the individual packages.
On a Linux system, it&#8217;s quite likely you&#8217;ll have all of these installed
already except for&nbsp;pkg-config.</p>
<p>Then build and install the <span class="caps">GTK</span> libraries in the order: GLib, Pango, <span class="caps">ATK</span>,
then <span class="caps">GTK</span>. For each library, follow the steps of configure, make, make
install mentioned above. If you&#8217;re lucky, this will all go smoothly, and
you&#8217;ll be ready to start compiling your own <span class="caps">GTK</span> applications. You can test
your <span class="caps">GTK</span> installation by running the gtk3-demo program that <span class="caps">GTK</span>&nbsp;installs.</p>
<p>If one of the <code>configure</code> scripts fails or running make fails, look closely at
the error messages printed; these will often provide useful information as
to what went wrong. When <code>configure</code> fails, extra information, such as errors
that a test compilation ran into, is found in the file config.log. Looking
at the last couple of hundred lines in this file will frequently make clear
what went wrong. If all else fails, you can ask for help on <span class="caps">GNOME</span>&#8217;s
<a href="https://discourse.gnome.org/tag/gtk">Discourse</a>.</p>
<h3 id="extra-configuration-options">Extra Configuration Options<a class="md-anchor" href="building.html#extra-configuration-options" title="Permanent link"></a></h3>
<p>In addition to the normal options, the configure script for the <span class="caps">GTK</span> library
supports a number of additional arguments. (Command line arguments for the
other <span class="caps">GTK</span> libraries are described in the documentation distributed with the
those&nbsp;libraries.)</p>
<div class="codehilite"><pre><span></span><code>configure
  [ --disable-modules | --enable-modules ]
  [[--with-included-immodules=MODULE1,MODULE2,...]]
  [ --enable-debug=[no/minimum/yes] ]
  [ --disable-Bsymbolic | --enable-Bsymbolic ]
  [ --disable-xkb | --enable-xkb ]
  [ --disable-xinerama | --enable-xinerama ]
  [ --disable-gtk-doc | --enable-gtk-doc ]
  [ --disable-cups | --enable-cups ]
  [ --disable-papi | --enable-papi ]
  [ --enable-xinput | --disable-xinput ]
  [ --enable-packagekit | --disable-packagekit ]
  [ --enable-x11-backend | --disable-x11-backend ]
  [ --enable-win32-backend | --disable-win32-backend ]
  [ --enable-quartz-backend | --disable-quartz-backend ]
  [ --enable-broadway-backend | --disable-broadway-backend ]
  [ --enable-wayland-backend | --disable-wayland-backend ]
  [ --enable-introspection=[no/auto/yes] ]
  [ --enable-installed-tests | --disable-installed-tests ]
</code></pre></div>

<dl>
<dt><code>--disable-modules</code> and <code>--enable-modules</code></dt>
<dd>Normally <span class="caps">GTK</span> will try to build the input method modules as little shared
  libraries that are loaded on demand. The <code>--disable-modules</code> argument
  indicates that they should all be built statically into the <span class="caps">GTK</span> library
  instead. This is useful for people who need to produce statically-linked
  binaries. If neither <code>--disable-modules</code> nor <code>--enable-modules</code> is
  specified, then the <code>configure</code> script will try to auto-detect whether
  shared modules work on your&nbsp;system.</dd>
<dt><code>--with-included-immodules</code></dt>
<dd>This option allows you to specify which input method modules you want to
  include directly into the <span class="caps">GTK</span> shared library, as opposed to building them
  as loadable&nbsp;modules.</dd>
<dt><code>--enable-debug</code></dt>
<dd>Turns on various amounts of debugging support. Setting this to <code>no</code> disables
  <code>g_assert()</code>, <code>g_return_if_fail()</code>, <code>g_return_val_if_fail()</code> and all cast
  checks between different object types. Setting it to <code>minimum</code> disables only
  cast checks. Setting it to <code>yes</code> enables runtime debugging. The default is
  <code>minimum</code>. Note that &#8216;no&#8217; is fast, but dangerous as it tends to destabilize
  even mostly bug-free software by changing the effect of many bugs from
  simple warnings into fatal crashes. Thus <code>--enable-debug=no</code> should not be
  used for stable releases of <span class="caps">GTK</span> unless you know precisely what you&#8217;re&nbsp;doing.</dd>
<dt><code>--disable-Bsymbolic</code> and <code>--enable-Bsymbolic</code></dt>
<dd>The option <code>--disable-Bsymbolic</code> turns off the use of the
  <code>-Bsymbolic-functions</code> linker flag. This is only necessary if you want to
  override <span class="caps">GTK</span> functions by using <code>LD_PRELOAD</code>.</dd>
<dt><code>--enable-explicit-deps</code> and <code>--disable-explicit-deps</code></dt>
<dd>If <code>--enable-explicit-deps</code> is specified then <span class="caps">GTK</span> will write the full set
  of libraries that <span class="caps">GTK</span> depends upon into its .pc files to be used when
  programs depending on <span class="caps">GTK</span> are linked. Otherwise, <span class="caps">GTK</span> only will include the
  <span class="caps">GTK</span> libraries themselves, and will depend on system library dependency
  facilities to bring in the other libraries. By default <span class="caps">GTK</span> will disable
  explicit dependencies unless it detects that they are needed on the system.
  (If you specify <code>--enable-static</code> to force building of static libraries,
  then explicit dependencies will be written since library dependencies don&#8217;t
  work for static libraries.) Specifying <code>--enable-explicit-deps</code> or
  <code>--enable-static</code> can cause compatibility problems when libraries that <span class="caps">GTK</span>
  depends upon change their versions, and should be avoided if&nbsp;possible.</dd>
<dt><code>--disable-xkb</code> and <code>--enable-xkb</code></dt>
<dd>By default the configure script will try to auto-detect whether the <span class="caps">XKB</span>
  extension is supported by the X libraries <span class="caps">GTK</span> is linked with. These options
  can be used to explicitly control whether <span class="caps">GTK</span> will support the <span class="caps">XKB</span>&nbsp;extension.</dd>
<dt><code>--disable-xinerama</code> and <code>--enable-xinerama</code></dt>
<dd>By default the configure script will try to link against the Xinerama
  libraries if they are found. These options can be used to explicitly control
  whether Xinerama should be&nbsp;used.</dd>
<dt><code>--disable-xinput</code> and <code>--enable-xinput</code></dt>
<dd>Controls whether <span class="caps">GTK</span> is built with support for the XInput or XInput2
  extension. These extensions provide an extended interface to input devices
  such as touchscreens, touchpads, and graphics tablets. When this support is
  compiled in, specially written <span class="caps">GTK</span> programs can get access to subpixel
  positions, multiple simultaneous input devices, and extra &#8220;axes&#8221; provided by
  the device such as pressure and tilt&nbsp;information.</dd>
<dt><code>--disable-gtk-doc</code> and <code>--enable-gtk-doc</code></dt>
<dd>The gtk-doc package is used to generate the reference documentation included
  with <span class="caps">GTK</span>. By default support for gtk-doc is disabled because it requires
  various extra dependencies to be installed. If you have gtk-doc installed and
  are modifying <span class="caps">GTK</span>, you may want to enable gtk-doc support by passing in
  <code>--enable-gtk-doc</code>. If not enabled, pre-generated <span class="caps">HTML</span> files distributed with
  <span class="caps">GTK</span> will be&nbsp;installed.</dd>
<dt><code>--disable-cups</code> and <code>--enable-cups</code></dt>
<dd>By default the configure script will try to build the <span class="caps">CUPS</span> print backend if
  the <span class="caps">CUPS</span> libraries are found. These options can be used to explicitly control
  whether the cups print backend should be&nbsp;built.</dd>
<dt><code>--disable-papi</code> and <code>--enable-papi</code></dt>
<dd>By default the configure script will try to build the <span class="caps">PAPI</span> print backend if
  the <span class="caps">PAPI</span> libraries are found. These options can be used to explicitly control
  whether the <span class="caps">PAPI</span> print backend should be&nbsp;built.</dd>
<dt><code>--disable-packagekit</code> and <code>--enable-packagekit</code></dt>
<dd>By default the configure script will try to build the PackageKit support for
  the open-with dialog if the PackageKit libraries are found. These options can
  be used to explicitly control whether PackageKit support should be&nbsp;built.</dd>
<dt><code>--enable-x11-backend</code>, <code>--disable-x11-backend</code></dt>
<dd>Enables the X11 backend for <span class="caps">GDK</span>. The X11 backend is enabled by default on
  Unix and Unix-like systems like&nbsp;Linux.</dd>
<dt><code>--enable-win32-backend</code>, <code>--disable-win32-backend</code></dt>
<dd>Enables the Windows backend for <span class="caps">GDK</span>. The Windows backend is enabled by
  default on&nbsp;Windows.</dd>
<dt><code>--enable-quartz-backend</code>, <code>--disable-quartz-backend</code></dt>
<dd>Enables the Quartz backend for <span class="caps">GDK</span>. The Quartz backend is enabled by default
  on&nbsp;macOS.</dd>
<dt><code>--enable-broadway-backend</code>, <code>--disable-broadway-backend</code></dt>
<dd>Enables the Broadway backend for <span class="caps">GDK</span>.</dd>
<dt><code>--enable-wayland-backend</code>, <code>--disable-wayland-backend</code></dt>
<dd>Enables the Wayland backend for <span class="caps">GDK</span>. The Wayland backend is enabled by
  default on&nbsp;Linux.</dd>
<dt><code>--enable-introspection</code></dt>
<dd>Build with or without introspection support. The default is&nbsp;&#8216;auto&#8217;.</dd>
<dt><code>--enable-installed-tests</code> or <code>--disable-installed-tests</code></dt>
<dd>Whether to install tests on the system. If enabled, tests and their data are
  installed in <code>${libexecdir}/gtk+/installed-tests</code>. Metadata for the tests is
  installed in <code>${prefix}/share/installed-tests/gtk+</code>. To run the installed
  tests, you can use the
  <a href="https://gitlab.gnome.org/GNOME/gnome-desktop-testing">gnome-desktop-testing-runner</a>&nbsp;harness.</dd>
</dl>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="building.html#dependencies"><span class="link-text">Dependencies</span></a></li>
        
        <li class="toc-list-item"><a href="building.html#external-dependencies"><span class="link-text">External dependencies</span></a></li>
        
        <li class="toc-list-item"><a href="building.html#building-and-testing-gtk"><span class="link-text">Building and testing GTK</span></a></li>
        
        <li class="toc-list-item"><a href="building.html#extra-configuration-options"><span class="link-text">Extra Configuration Options</span></a></li>
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>